# [11724] ì—°ê²° ìš”ì†Œì˜ ê°œìˆ˜

## **ğŸ“ë¬¸ì œ**

ë°©í–¥ ì—†ëŠ” ê·¸ë˜í”„ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ì—°ê²° ìš”ì†Œ (Connected Component)ì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì‹œì˜¤.

### **ì…ë ¥**

ì²«ì§¸ ì¤„ì— ì •ì ì˜ ê°œìˆ˜ Nê³¼ ê°„ì„ ì˜ ê°œìˆ˜ Mì´ ì£¼ì–´ì§„ë‹¤. (1 â‰¤ N â‰¤ 1,000, 0 â‰¤ M â‰¤ NÃ—(N-1)/2) ë‘˜ì§¸ ì¤„ë¶€í„° Mê°œì˜ ì¤„ì— ê°„ì„ ì˜ ì–‘ ëì  uì™€ vê°€ ì£¼ì–´ì§„ë‹¤. (1 â‰¤ u, v â‰¤ N, u â‰  v) ê°™ì€ ê°„ì„ ì€ í•œ ë²ˆë§Œ ì£¼ì–´ì§„ë‹¤.

### **ì¶œë ¥**

ì²«ì§¸ ì¤„ì— ì—°ê²° ìš”ì†Œì˜ ê°œìˆ˜ë¥¼ ì¶œë ¥í•œë‹¤.

### **ì˜ˆì œì…ì¶œë ¥**

**ì˜ˆì œ ì…ë ¥1**

```
6 5
1 2
2 5
5 1
3 4
4 6
```

**ì˜ˆì œ ì¶œë ¥1**

```
2
```

**ì˜ˆì œ ì…ë ¥2**

```
6 8
1 2
2 5
5 1
3 4
4 6
5 4
2 4
2 3
```

**ì˜ˆì œ ì¶œë ¥2**

```
1
```

### **ì¶œì²˜**

https://www.acmicpc.net/problem/11724

## **ğŸ§CODE REVIEW**

### **ğŸ˜«ë‚˜ì˜ ì˜¤ë‹µ í’€ì´ 1**

```python
def get_connected(graph, num):
    result = 0
    nodes = list(range(1, num+1))
    stack = []
    while nodes:
        root = nodes.pop()
        stack.append(root)
        while stack:
            n = stack.pop()
            for node in graph[n]:
                if node in nodes:
                    nodes.remove(node)
                    stack.append(node)
        result += 1
    return result


node, edge = map(int, input().split())
graph = {}

for _ in range(edge):
    a, b = map(int, input().split())
    if a not in graph:
        graph[a] = [b]
    elif b not in graph[a]:
        graph[a].append(b)
    if b not in graph:
        graph[b] = [a]
    elif a not in graph[b]:
        graph[b].append(a)

print(get_connected(graph, node))

```

|   ê²°ê³¼    | ë©”ëª¨ë¦¬(KB) | ì‹œê°„(ms) |   ì–¸ì–´   | ì½”ë“œ ê¸¸ì´(B) |
| :-------: | :--------: | :------: | :------: | :----------: |
| ì‹œê°„ ì´ˆê³¼ |            |          | Python 3 |     748      |

#### **ğŸ“í•´ì„¤**

ì—°ê²° ìš”ì†Œì˜ ê°œìˆ˜ëŠ” ê°„ë‹¨í•˜ê²Œ ë‚´ë¶€ì— ì„œë¡œ ì´ì–´ì ¸ìˆì§€ ì•Šì€ ê·¸ë˜í”„ì˜ ê°œìˆ˜ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.

**ì•Œê³ ë¦¬ì¦˜**
```
ë‹¤ìŒì„ ë°˜ë³µ
1. ì•ˆ ê±°ì³ê°„ ë…¸ë“œ ì¤‘ì—ì„œ ì•„ë¬´ ë…¸ë“œ í•˜ë‚˜ë¥¼ rootë¡œ ì¡ê³  dfs
2. dfs í•œë²ˆ ëë‚˜ë©´ ì—°ê²°ìš”ì†Œ ê°’ + 1
ëë‚˜ë©´ ì—°ê²°ìš”ì†Œ ê°’ return
```

ë°˜ë³µë¬¸ ì•ˆì—ì„œ dfsë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë‹ˆ ì´ì¤‘ ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•˜ê²Œëœë‹¤.

```python
while nodes:
  #dfs
  while stack:
    #...
```

ì‹œê°„ì´ˆê³¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ì—†ì—ˆë‹¤. ì¡°ê¸ˆ ë” ë¹ ë¥´ê²Œ í’€ì´í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ì—†ì„ê¹Œ?

#### **ğŸ˜…ê°œì„ ì  1**

1. ë…¸ë“œì˜ ë°©ë¬¸ í™•ì¸ ë°©ë²• 
    
    ê±°ì³ê°€ê³  ì•ˆê±°ì³ê°€ê³ ë¥¼ í™•ì¸í•˜ëŠ” ë°©ë²•ì„ ìš”ì†Œê°€ ìˆëƒ ì—†ëƒê°€ ì•„ë‹ˆë¼ booleanê°’ìœ¼ë¡œ ë°”ê¿”ì£¼ì–´ì•¼ í•œë‹¤. ë¹„íŠ¸ ì—°ì‚°ë„ ë‚˜ì˜ì§€ ì•Šì„ ê²ƒ ê°™ë‹¤. ì§ê´€ì ì¸ í’€ì´ë¥¼ ìœ„í•´ booleanê°’ìœ¼ë¡œë„ ì¶©ë¶„í•´ë³´ì¸ë‹¤.

    ìš”ì†Œì˜ ì œê±°ì™€ ì¡´ì¬ í™•ì¸ ë°©ë²•ì€ ìƒë‹¹íˆ ë¹„íš¨ìœ¨ì ì´ë‹¤.

### **ğŸ˜«ë‚˜ì˜ ì˜¤ë‹µ í’€ì´ 2**

```python
def get_connected(graph, num):
    result = 0
    visited = list(False for _ in range(num+1))
    stack = []
    for i in range(1, num+1):
        if not visited[i]:
            visited[i] = True
            root = i
            stack.append(root)
            while stack:
                n = stack.pop()
                for node in graph[n]:
                    if not visited[node]:
                        visited[node] = True
                        stack.append(node)
            result += 1
    return result


node, edge = map(int, input().split())
graph = {}

for _ in range(edge):
    a, b = map(int, input().split())
    if a not in graph:
        graph[a] = [b]
    elif b not in graph[a]:
        graph[a].append(b)
    if b not in graph:
        graph[b] = [a]
    elif a not in graph[b]:
        graph[b].append(a)

print(get_connected(graph, node))
```

**ë‘ë²ˆì§¸ ì˜ˆì œë¥¼ ì…ë ¥ê°’ìœ¼ë¡œ í–ˆì„ë•Œ ëŸ°íƒ€ì„**
```
before : 0.00011 sec
after : 0.00007 sec
```

í™•ì‹¤íˆ ì—°ì‚°ì´ ì „ë³´ë‹¤ ë¹ ë¥´ë‹¤. ëŸ°íƒ€ì„ì´ 7/11 ìˆ˜ì¤€ìœ¼ë¡œ ì¤„ì–´ë“¤ì—ˆë‹¤.


|          ê²°ê³¼          | ë©”ëª¨ë¦¬(KB) | ì‹œê°„(ms) |   ì–¸ì–´   | ì½”ë“œ ê¸¸ì´(B) |
| :--------------------: | :--------: | :------: | :------: | :----------: |
| ëŸ°íƒ€ì„ ì—ëŸ¬ (KeyError) |            |          |  PyPy3   |     905      |
|       ì‹œê°„ ì´ˆê³¼        |            |          | Python 3 |     864      |

ì™œ ì´ëŸ° ì‹œë ¨ì„ ë‚˜ì—ê²Œ...ğŸ˜­

#### **ğŸ˜…ê°œì„ ì  2**

1. ê°„ì„ ì´ ì—†ëŠ” ë…¸ë“œ ì²˜ë¦¬

   ```python
   # ì¸ì ‘ë¦¬ìŠ¤íŠ¸ ìƒì„±
   for _ in range(edge):
       a, b = map(int, input().split())
       if a not in graph:
           graph[a] = [b]
       elif b not in graph[a]:
           graph[a].append(b)
       if b not in graph:
           graph[b] = [a]
       elif a not in graph[b]:
           graph[b].append(a)
   ```

   ì¸ì ‘ë¦¬ìŠ¤íŠ¸ì˜ ì…ë ¥ì„ ë‹¤ìŒê³¼ ê°™ì´ ë°›ì•˜ëŠ”ë° ì´ ê²½ìš°ì—ëŠ” ì…ë ¥ ë°›ì§€ ì•Šì€ ê°„ì„ ì— ëŒ€í•´ì„œëŠ” KeyErrorê°€ ë‚˜ì˜¬ ìˆ˜ ë°–ì— ì—†ë‹¤.

    **ì…ë ¥ê°’ ë°˜ë¡€**
   ```
   6 2
   3 4
   4 2
   ```

     í•´ê²°ë°©ë²•ì€ ë‘ ê°€ì§€ì¸ë° ì¸ì ‘ë¦¬ìŠ¤íŠ¸ì—ì„œ ê°„ì„ ì„ ì…ë ¥ë°›ì§€ ì•Šì€ ë…¸ë“œì— ëŒ€í•´ì„œ ìƒì„±ì„ í•´ì£¼ê±°ë‚˜ dfs ë‚´ë¶€ì—ì„œ KeyErrorê°€ ìƒê¸°ì§€ ì•Šë„ë¡ í•˜ë©´ ëœë‹¤.
     
     **dfs ë‚´ë¶€ì—ì„œ KeyErrorê°€ ìƒê¸°ì§€ ì•Šë„ë¡ ì²˜ë¦¬í•´ë³´ì.**

### **ğŸ§¾ë‚˜ì˜ í’€ì´**

```python
def get_connected(graph, num):
    result = 0
    visited = {i: False for i in range(num+1)}
    stack = []
    for i in range(1, num+1):
        if not visited[i]:
            visited[i] = True
            root = i
            stack.append(root)
            while stack:
                n = stack.pop()
                if n not in graph:
                    break
                for node in graph[n]:
                    if not visited[node]:
                        visited[node] = True
                        stack.append(node)
            result += 1
    return result


node, edge = map(int, input().split())
graph = {}

for _ in range(edge):
    a, b = map(int, input().split())
    if a not in graph:
        graph[a] = [b]
    elif b not in graph[a]:
        graph[a].append(b)
    if b not in graph:
        graph[b] = [a]
    elif a not in graph[b]:
        graph[b].append(a)

print(get_connected(graph, node))
```

|     ê²°ê³¼     | ë©”ëª¨ë¦¬(KB) | ì‹œê°„(ms) |   ì–¸ì–´   | ì½”ë“œ ê¸¸ì´(B) |
| :----------: | :--------: | :------: | :------: | :----------: |
| ë§ì•˜ìŠµë‹ˆë‹¤!! |   188220   |   1176   |  PyPy3   |     924      |
|  ì‹œê°„ ì´ˆê³¼   |            |          | Python 3 |     924      |

~~pypy3 ì‹ ê³µ~~

### **ë‹¤ë¥¸ í’€ì´**

```python
import sys
sys.setrecursionlimit(10000)

INPUT = sys.stdin.readline


def dfs(i, graph, visited, vertex_num):
    visited[i] = True
    for j in range(1, vertex_num + 1):
        if visited[j]:
            continue
        if graph[i][j] == 0:
            continue
        dfs(j, graph, visited, vertex_num)


def solution():
    N = 1001
    graph = [[0] * N for i in range(N)]
    visited = [0] * N

    vertex_num, edges_num = map(int, INPUT().split())
    for i in range(edges_num):
        a, b = map(int, INPUT().split())

        graph[a][b] = 1
        graph[b][a] = 1

    cnt = 0
    for i in range(1, vertex_num + 1):
        if visited[i] == 0:
            cnt += 1
            dfs(i, graph, visited, vertex_num)
    return cnt
print(solution())
```

|  ì•„ì´ë””  | ë¬¸ì œ  |    ë¬¸ì œ ì œëª©     |     ê²°ê³¼     | ë©”ëª¨ë¦¬(KB) | ì‹œê°„(ms) |   ì–¸ì–´   | ì½”ë“œ ê¸¸ì´(B) |
| :------: | :---: | :--------------: | :----------: | :--------: | :------: | :------: | :----------: |
| lsj6445z | 11724 | ì—°ê²° ìš”ì†Œì˜ ê°œìˆ˜ | ë§ì•˜ìŠµë‹ˆë‹¤!! |   37012    |   532    | Python 3 |     770      |

#### **ğŸ“í•´ì„¤**

python3ë¡œ í†µê³¼í•œ ì¡´ê²½ìŠ¤ëŸ¬ìš´ ë¶„...

íŠ¹ì´ì ë§Œ ë¹ ë¥´ê²Œ í™•ì¸í•´ë³´ì.

1. **ì…ë ¥ê°’ N ìŒ©ê¹Œê¸°**

    *ì²«ì§¸ ì¤„ì— ì •ì ì˜ ê°œìˆ˜ Nê³¼ ê°„ì„ ì˜ ê°œìˆ˜ Mì´ ì£¼ì–´ì§„ë‹¤. (1 â‰¤ N â‰¤ 1,000, 0 â‰¤ M â‰¤ NÃ—(N-1)/2)*
    
    ë‹¤ìŒê³¼ ê°™ì€ ì¡°ê±´ì„ ì´ìš©í•´ì„œ Nê³¼ ìƒê´€ì—†ì´ 1001ê°œì˜ indexë¥¼ ê°€ì§„ listë¥¼ ìƒì„±í–ˆë‹¤. (1001ì¸ ì´ìœ ëŠ” ë¬¸ì œì˜ indexê°€ 1ë¶€í„°ì´ê¸° ë•Œë¬¸)

    ```python
    N = 1001
    graph = [[0] * N for i in range(N)]
    visited = [0] * N
    ```

    ì´ë ‡ê²Œ í•˜ë©´ ì¬ë¯¸ìˆëŠ” ê²Œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì€ ë–¨ì–´ì§ˆ ìˆ˜ ìˆê² ì§€ë§Œ ì†ë„ê°€ ë¹¨ë¼ì§€ê³  ì¸ì ‘ë¦¬ìŠ¤íŠ¸ ìƒì„±ì´ ì‰½ë‹¤.

    ```python
    # ì¸ì ‘ë¦¬ìŠ¤íŠ¸ ìƒì„±
    for i in range(edges_num):
        a, b = map(int, INPUT().split())

        graph[a][b] = 1
        graph[b][a] = 1
    ```

2. `sys.setrecursionlimit`ê°€ ë­˜ê¹Œ?ğŸ¤”

    > sys.setrecursionlimit() method is used to set the maximum depth of the Python interpreter stack to the required limit.
    >
    > -GeeksforGeeks.org-

    ê·¸ëŸ¬ë‹ˆê¹ python interpreter stackì˜ ìµœëŒ€ depthë¥¼ ì„¤ì •í•œë‹¤ëŠ” ì–˜ê¸´ë° dfsëŠ” ì¬ê·€ì˜ í˜•íƒœë¡œ í’€ì´í•  ìˆ˜ ìˆëŠ” ì´ìœ ê°€ ì¬ê·€í•¨ìˆ˜ë“¤ì„ ì„ ì–¸í•  ë•Œë§ˆë‹¤ python interpreter stackì— í•¨ìˆ˜ê°€ ì°¨ê³¡ì°¨ê³¡ ìŒ“ì´ê¸° ë•Œë¬¸ì´ë‹¤. 

    `sys.getrecursionlimit()`ë¥¼ ì´ìš©í•´ì„œ ì´ depthì˜ ì´ˆê¸° ì„¤ì •ê°’ì„ í™•ì¸í•´ë³´ë©´ 1000ì´ë‹¤. ì½”ë”©í…ŒìŠ¤íŠ¸ ë¬¸ì œì—ì„œ ì¶©ë¶„íˆ ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ìˆ«ì ì¼ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì¬ê·€í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆë‹¤ë©´ ì¶©ë¶„í•œ ìˆ˜ì˜ depthë¥¼ ì„¤ì •í•´ ì¤„ í•„ìš”ê°€ ìˆë‹¤. 
    
    ex) `sys.setrecursionlimit(10 ** 6)`

    ë¬¸ì œë¥¼ ì œëŒ€ë¡œ í’€ì—ˆëŠ”ë°ë„ ë¶ˆêµ¬í•˜ê³  ì½”ë”©í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ì˜¤ë¥˜ë¥¼ ë³¼ ìˆ˜ ì—†ê¸°ê¹Œì§€í•œë‹¤ë©´ ì–µì¥ì´ ë¬´ë„ˆì§ˆ ìˆ˜ ë°–ì— ì—†ë‹¤.

### **ğŸ”–ì •ë¦¬**

1. ë‘ê°€ì§€ ìƒíƒœ(ë°©ë¬¸ ê°™ì€)ë¥¼ ì²˜ë¦¬í•  ë•ŒëŠ” ë˜ë„ë¡ booleanì„ ì‚¬ìš©í•´ì„œ ì²˜ë¦¬í•˜ì. 
   
   => elementì˜ ì‚­ì œ, ì¶”ê°€, ì¡´ì¬ í™•ì¸ì€ ë¹„íš¨ìœ¨ì ì´ë‹¤.

2. í•­ìƒ ë°˜ë¡€ê°€ ìˆì„ ì§€ ìƒê°í•´ë³´ì. ë‚´ê°€ ìƒê°í•œ ì™„ë²½í•œ í’€ì´ë„ ë¹ˆí‹ˆì´ ìˆì„ ìˆ˜ ìˆë‹¤.

3. ì¬ê·€ í•¨ìˆ˜ ì‚¬ìš©í•  ë•ŒëŠ” pythonì˜ recursionlimitë¥¼ ì£¼ì˜í•˜ì.

## ğŸ“šì°¸ê³  ì‚¬ì´íŠ¸

> **[polynomeer.velog] ì—°ê²° ìš”ì†Œ(Connected Component)**<br/>
https://velog.io/@polynomeer/%EC%97%B0%EA%B2%B0-%EC%9A%94%EC%86%8CConnected-Component<br/>
ì—°ê²° ìš”ì†Œë¶€í„° ë¬¸ì œê¹Œì§€ ì°¨ê·¼ì°¨ê·¼ í’€ì´ë˜ì–´ìˆë‹¤.
>
> **[GeeksforGeeks]sys.setrecursionlimit() method**<br/>
https://www.geeksforgeeks.org/python-sys-setrecursionlimit-method/<br/>
>
> **[íŒŒì´ì¬ ì½”ë”©í…ŒìŠ¤íŠ¸ íŒ] sys.setrecursionlimit**<br/>
https://fuzzysound.github.io/sys-setrecursionlimit<br/>
setresursionlimitì— ëŒ€í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•´ë†“ì€ ê¸€
